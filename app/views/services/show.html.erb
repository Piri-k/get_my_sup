<div class="w-75 container flex-column">
  <div class="row mt-4">
    <h1> <%= @service.title %></h1>
  </div>
  <div class="d-flex justify-content">
    <h6 class="me-5"> <i class="fa-solid fa-star"></i> <%= @service.user.rating %></h6>
    <h6> <i class="fa-solid fa-location-dot"></i> <%= @service.location %></h6>
  </div>

  <div id="carouselExample" class="carousel slide mt-4">
  <div class="carousel-inner">
    <% @service.photos.each do |photo| %>
      <div class="carousel-item active">
        <%= cl_image_tag photo.key, height: 720, width: 1280, crop: :fill, class: "d-block" %>
      </div>
    <% end %>
    <% if @service.photos[0].nil? %>
      <div class="carousel-item active">
        <%= cl_image_tag (@service.user.photo.present? ? @service.user.photo.key : "logo.png"), height: 720, width: 1280, crop: :fill, :gravity=>"auto", class: "d-block" %>
      </div>
    <% end %>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>


  <div class="row mt-4 w-75">
    <div class="d-flex justify-content-between mb-2">
      <div class="d-flex align-item-center">
      <h6 class="me-5 m-auto"> <i class="fa-solid fa-mask"></i> <%= @service.user.alias %> </h6>
      <h6 class="m-auto"> <i class="fa-solid fa-hand-sparkles"></i> <%= @service.user.power.capitalize %></h6>
      </div>
      <%= cl_image_tag (@service.user.photo.present? ? @service.user.photo.key : "logo.png"), class: "avatar dropdown-toggle", id: "navbarDropdown", data: { bs_toggle: "dropdown" }, 'aria-haspopup': true, 'aria-expanded': false %>
    </div>

    <hr>
    <h2>Description :</h2>
    <p><%= @service.content %></p>
    <hr>
    <h6> <i class="fa-sharp fa-solid fa-calendar"></i> <%= @service.created_at.to_date %></h5>
    <p><%= @service.price_day %>â‚¬</p>
  </div>

    <% if policy(@service).edit? %>
      <%= link_to "Edit this service", edit_service_path(@service) %> |
    <% end %>
    <%if policy(@service).destroy? %>
    <%= link_to service_path(@service), data: {turbo_method: :delete, turbo_confirm: "Are you sure ?"} do %>
    Destroy this service
    <% end %>
    <% end %>
  <hr>

    <div class="">
      <h1 class="mb-4">Make a reservation</h1>
      <%= render "reservations/form", service: @service, reservation: @reservation %>
    </div>

</div>
